{% extends "pagina/global/base.html" %}
{% load static %}
{% block content %}
    <section id="destinos">
        <h2>Destinos populares</h2>

        <form method="GET" action="{% url 'destinos' %}">
            <input type="text" name="q" placeholder="Buscar paises..."
                   value="{{ query|default_if_none:'' }}">
            <button type="submit">Buscar</button>
        </form>
        <br>

        {% if countries %}
            <div class="destinos-grid">
                {% for country in countries %}
                    {% include "pagina/partials/card_country.html" %}
                {% empty %}
                    <p>No hay paises</p>
                {% endfor %}
            </div>

            <div class="pagination">
                <span class="step-links">
                    {% if page_obj.has_previous %}
                        <a href="?page={{ page_obj.previous_page_number }}{% if query %}&q={{ query }}{% endif %}">Anterior</a>
                    {% endif %}

                    <span class="current">
                        PÃ¡gina {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}.
                    </span>

                    {% if page_obj.has_next %}
                        <a href="?page={{ page_obj.next_page_number }}{% if query %}&q={{ query }}{% endif %}">Siguiente</a>
                    {% endif %}
                </span>
            </div>
        {% else %}
            <p>No se encontraron paises para "{{ query }}"</p>
        {% endif %}

        <p>
            <a href="{% url 'index' %}">Volver a la lista de paises</a>
        </p>
    </section>
{% endblock content %}